## 一、需求分析阶段

**重要性：**✴✴✴

<span style="color:#D93124"> 请务必在实施过程未开始前，**充 分 了 解** 此部分信息。不要小瞧前期准备工作，如有疏漏，小则后期返工，大则全盘皆溃。 </span >

需求分析阶段的主要参与角色为： #BusinessAnalyst
	- 负责与业务部门进行沟通，**了解业务需求**
	- 分析数据仓库的**目标和功能需求**
	- 将**业务需求转化为技术需求**

### 1. 确认分析主题

你需要做的是：了解目前已经定好的分析主题的内容，我是说从里到外了解它。在BI项目实施开启前，你需要明确知道，你要分析的内容是什么，如何分析它，怎么展现分析结果。

如果你已经知道怎么做 了，那再好不过。

如果你还不是特别清楚这块内容，请迅速找到大佬儿们借几个相关项目文件，学习其制作方式及业务理念，并在这次项目中大量套用模板。

关于如何优秀的表达出你将要分析的内容，推荐书籍《Story Telling with Data》；关于财务模型常用的分析方式，请借鉴历史项目。

**1.1 分析主题及模块确认**

关于分析模块，举几个例子：

- 利润
- 资产负债
- 资金
- 账龄
- 杜邦
- 滚动预测

其实，分析主题在项目开启前便已经定下了，在签合同的时候…… 所以这里并不是让你把主题定下来。

你要讲这个主题切分成几个模块，可以在BI中合理展现的模块。一个模块下可以有多个页面。

**1.2 分析内容及方式确认**

像帕累托、对标、可比项之类的，这些不是分析主题，而是分析方式。借助它们可以帮助我们更好的展现分析主题。

TODO：

* 确认分析主题
* 想好分析方式
* 如果想不到，请先进行学习

### 2. 确认关键角色

![[Pasted image 20230423115932.png]]
#### 2.1 项目经理

项目经理是一个项目中不可或缺的角色。BI项目中有可能有一个或两个项目经理，分别有可能是来自于甲方或乙方。也就是说，人员配备完全时，甲方乙方应各出一人作为项目经理/负责人，双方配合调动各方资源以确保项目的正常进行。

对于你来说，这个人会时不时过来问你的进度，也会偶尔给你立立Flag，教你做做事。

这时，如果你初出江湖，天赋异禀，请100%相信你的项目经理。

反之，如果你对自己的技术坚信不疑，你相信你就是这帮人里最懂的人，那么你很可能需要疯狂的向上管理。因为只有你真正知道，做完这个需求要多久，风险有多大，方法是否好。

#### 2.2 最终需求确认人

该角色一般是BI项目的最初发起人，也就是最开始提出想做BI的那个人。一个BI项目里，有至少一个人会提需求，我的意思是，你可能会收到来自不同部门、不同级别的人提出的各种各样的需求。这时候就有意思了，如果你都接了，你的报告就是一个四不像；如果你明智的有选择的接，你会发现需求中可能会有相互矛盾的点无法解决；如果你不接，小心被揍……

所以呢，最开始我们就要明确，<span style="color:#D93124">最终需求确认人有且只能有一位</span>，所有需求均由他来收集/提出。

#### 2.3 Power BI 管理员

一般来说为了安全性考虑，企业的Power BI总管理账户会交给IT部门负责。在项目开发时，如果目标客户是第一次拥有Power BI账户，那么很可能需要对IT进行一系列的交接及培训等内容。



#### 2.4 维护者

由于一个BI项目中会有多种角色加入进来，因此维护者角色也可能是多个：

* 主数据信息维护者

  该部分财务人员偏多，财务相关的Mapping比较复杂，比较多变，因此维护的情况比较多；大部分业务主数据都是系统维护好的，所以也不需要人来维护

* 中台数据库维护者

  BI项目实施中一般会涉及到中台的搭建，但关于数据方面的治理，库的搭建与管理，一般都是由甲方内部来自行完成的；乙方不敢，也不能保证一辈子将甲方的中台维护好。

  如果接了中台搭建，那么BI的开发工作量相对于中台来说，便是九牛一毛，那么此项目也就远远不仅仅是一个几个月就能完成的BI项目了。

* BI报告维护者

  维护者角色一般会有Power BI报表开发的权限及大部分数据权限。一般来说，可以由乙方直接承担，或由甲方发起项目的部门下的某业务人员、或将要培养的数据分析人员，承担该BI维护者责任。

  如乙方可承担该部分责任，自然不用多说。如无法承担，<span style="color:#D93124">请最快速定位后续维护者，并积极将其拉入项目当中磨合</span>，以练习其技能及熟悉程度。

  如截止项目开发完成为止，尚未有维护者加入项目中熟悉该内容，该BI将面临无人维护，随时崩溃的一个状态。届时，请准备好接受甲方的折磨。假如你有多个项目处于该状态…… 请准备好你的痛苦面具



TODO：

* 项目经理
  * 确认双方的项目负责人
  * 及时与己方负责人沟通技术、时间风险点
  * 如果你很强，请积极向上管理，请千万别被动。如果有需要，参与到时间计划的订制中
  * 如果没有这个角色存在，那你更要严格遵循此文中的原则，承担该角色的任务
* 最终需求确认人
  * 确认最终需求确认人
  * 多人提需求时，由该角色收集需求，最后由该角色统一提出需求
  * 确保项目开始至结束，你的需求确认人都健在…… 不接受任何其他人提出的需求
* Power BI 管理员
  * 确认管理者
  * 确认是否需要一系列的培训及交接（也许需要微软销售等介入）
* 维护者
  * 确认各个角色的维护者
  * 积极将维护者拉入项目中，尽量由他们多承担任务，以便了解更多信息
  * 在项目进行中，双方总结维护者文档以便交接

### 3. 确认终端用户
![[Pasted image 20230423115944.png]]

终端用户（End User）就是最终将要看到这些报告的人，这些人是严格的报告查看者，不具有任何其他任何的角色与权限。对于终端用户，我们先要确认其**任职级别**，及**任职角色**。

**任职级别**：指用户在企业中的任职级别。

**任职角色**：指用户在企业中担任的角色，比如财务、销售、市场等。

当我们完成以上两种信息的确认后，我们可以简单的画出一幅矩阵图：

| 角色/级别 | 业务 | 管理 | 总监 |
| --------- | ---- | ---- | ---- |
| 财务      | √    | √    | √    |
| 销售      | √    |      |      |
| 市场      |      | √    |      |

对于不同的角色与级别，可能需要看到不同的报告、不同的页面、不同的展现方式、不同的侧重点，这对我们的报告体系搭建有着莫大的关系。当然，如果你幸运地只需要做一种角色一种级别的报告，那么恭喜你，可以跳过这一部分。

#### 3.1 任职级别

不同级别的用户需要看到的报告是不同的，因此<span style="color:#D93124">我们在确认好用户级别后，方可规划好报告的内容</span>。比如：

* 对于CXO/VP等顶层管理者，他们更想看到集团整体状况；
* 对于业务线负责人，部门负责人等中层管理者，他们需要看到其管辖范围内的概况数据，并追踪KPI完成情况；
* 而对于业务人员，他们可能会需要最底层的明细数据，以及数导出功能

当级别不同两个人看到相同的一份报告时，很有可能一人点赞一人踩。而导致此场面出现的元凶，便是BI报告的目标人群没有明确，因此，如果一份报告有多类用户级别，那么一定要考虑该报告是否能**同时满足**这些人的需求。如果不能，如何解决。

#### 3.2 任职角色

举个例子来说，某BI项目中的角色有：

- 集团财务 
- 子公司负责人 
- 部门负责人 
- 大区负责人

很显然，上述人员的角色所关心的数据不同，所见BI报告也不尽相同。比如：

* 集团财务可能要看合并报表以及其他所有的报告；
* 公司负责人要看公司报表
* 部门负责人要看部门管报

#### 3.3 权限

不管是角色，还是级别，都会影响到报告页面的设计。我们可能会为他们设计一些共同查看的页面，一些不共同查看的页面。

除此之外，对于这两种角色下的不同账号，我们一定会做一些数据上的权限分配。

因此，我们需要在确认好终端用户后，在设计报告内容时，填写以下表格：

| 角色 | 级别 | 报告页面                 | 数据权限             |
| ---- | ---- | ------------------------ | -------------------- |
| 财务 | 总监 | 管报、收入分析、凭证明细 | 所有科目             |
| 财务 | 记账 | 凭证明细                 | 根据职能划分财务科目 |
| 销售 | 总监 | 收入分析                 | 收入科目             |

关于上述两种权限的操作（页面、数据），可参考本站[此篇文章](https://www.air-yan.xyz/2021/08/26/21-08-26_row-level-security/)。

#### 3.4 数量确认
![[Pasted image 20230423120000.png]]

用户数量的多少会间接、或直接影响到**部署方式**的选择。而不同的部署方式往往会牵扯到不同的后续问题，如**性能瓶颈**、**环境配置**等等。

关于部署方式，请见本文另一个Section。

关于性能瓶颈，主要是测试内存、CPU是否能抗住用户的**最大并发量**。要计算最大并发量，需要考虑终端用户看报告的周期，时间段，进而推测出一个并发数量并对其进行测试。关于性能测试、优化等，请见相关文章。

#### 4. 其他
- 周会机制
- 需求变更机制
- 文件共享以及版本控制机制
- 确认会议工具
- 测试方案

TODO：

* 确认用户级别、角色

* 确认对应的报告内容

* 确认对应的数据内容

* 画出用户角色/级别图表

* 确认终端用户数量及性能瓶颈

#Todo 我需要在这里写一下具体业务咨询需要做的事情
#ToDo 对逻辑时，业务和IT都要在
